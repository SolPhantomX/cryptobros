<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>CRYPTOBROS</title>
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: Arial, sans-serif;
      background-size: cover;
      background-attachment: fixed;
    }
    .top-section {
      position: relative;
      height: 300px;
    }
    .header {
      width: 100%;
      height: 100%;
      background: url('https://raw.githubusercontent.com/SolPhantomX/cryptobros/main/header.jpg') center/cover;
      border: 2px dashed #555;
      border-radius: 8px;
      cursor: move;
    }
    .avatar {
      width: 200px;
      height: 200px;
      border-radius: 50%;
      border: 4px solid white;
      background: url('https://raw.githubusercontent.com/SolPhantomX/cryptobros/main/avatar.png') center/cover;
      position: absolute;
      bottom: -100px;
      left: 50%;
      transform: translateX(-50%);
      box-shadow: 0 4px 12px rgba(0,0,0,0.4);
    }
    .main-layout {
      max-width: 1200px;
      margin: 220px auto 0;
      display: flex;
      gap: 20px;
      padding: 0 20px;
    }
    .edit-btn {
      position: absolute;
      top: 16px;
      right: 16px;
      width: 32px;
      height: 32px;
      background: #333;
      border: 1px solid #666;
      border-radius: 50%;
      color: #ffcc00;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      z-index: 100;
    }
    .edit-tooltip {
      position: absolute;
      top: 50px;
      right: 16px;
      background: #000;
      color: #ffcc00;
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 14px;
      white-space: nowrap;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.2s;
      z-index: 100;
    }
    .sidebar { width: 200px; }
    .nav-item {
      padding: 10px 0;
      color: #385898;
      font-weight: bold;
      cursor: pointer;
    }
    .main { flex: 1; }
    .name, .rank, .field-value {
      color: #ffcc00;
      animation: flicker 3s infinite alternate;
      outline: none;
    }
    @keyframes flicker {
      0%,19%,21%,23%,25%,54%,56%,80%,82%,84%,86%,100% { opacity:1; }
      20%,24%,55%,81%,85% { opacity:0.8; }
    }
    .name { font-size: 28px; font-weight: bold; margin-bottom: 8px; }
    .rank { margin-bottom: 20px; }
    .field-label { color: #aaa; margin: 10px 0 4px; font-weight: bold; }
    #header-upload, #avatar-upload, #bg-upload { display: none; }
  </style>
</head>
<body>

<div class="top-section">
  <div class="header" id="header"></div>
  <div class="avatar" id="avatar"></div>
  <div class="edit-btn" id="editBtn">⚙️</div>
  <div class="edit-tooltip" id="editTooltip">Edit Profile</div>
</div>

<div class="main-layout">
  <div class="sidebar">
    <div class="nav-item">News Feed</div>
    <div class="nav-item">Messages</div>
    <div class="nav-item">My Groups</div>
    <div class="nav-item">Tribunal</div>
    <div class="nav-item">My Friends</div>
  </div>
  <div class="main">
    <div class="name" contenteditable="true" id="name">@cryptobros</div>
    <div class="rank" contenteditable="true" id="rank">Degen (Master)</div>
    
    <div class="field-label">Full Name</div>
    <div class="field-value" contenteditable="true" id="fullName"></div>
    
    <div class="field-label">About</div>
    <div class="field-value" contenteditable="true" id="about"></div>
    
    <div class="field-label">City</div>
    <div class="field-value" contenteditable="true" id="city"></div>
  </div>
</div>

<input type="file" id="header-upload" accept="image/*">
<input type="file" id="avatar-upload" accept="image/*">

<script>
  // Загрузка данных
  const fields = ['fullName', 'about', 'city'];
  fields.forEach(id => {
    const saved = localStorage.getItem(id);
    if (saved) document.getElementById(id).textContent = saved;
  });

  // Автосохранение
  fields.forEach(id => {
    document.getElementById(id).addEventListener('blur', e => {
      localStorage.setItem(id, e.target.textContent);
    });
  });

  // Drag-to-pan для шапки
  let headerPos = JSON.parse(localStorage.getItem('headerPos')) || { x: 0, y: 0 };
  document.getElementById('header').style.backgroundPosition = `${headerPos.x}px ${headerPos.y}px`;
  let isDragging = false, startX, startY;
  document.querySelector('.header').addEventListener('mousedown', e => {
    isDragging = true;
    startX = e.clientX - headerPos.x;
    startY = e.clientY - headerPos.y;
    document.body.style.cursor = 'grabbing';
  });
  document.addEventListener('mousemove', e => {
    if (!isDragging) return;
    headerPos.x = e.clientX - startX;
    headerPos.y = e.clientY - startY;
    document.getElementById('header').style.backgroundPosition = `${headerPos.x}px ${headerPos.y}px`;
  });
  document.addEventListener('mouseup', () => {
    if (isDragging) {
      isDragging = false;
      document.body.style.cursor = 'default';
      localStorage.setItem('headerPos', JSON.stringify(headerPos));
    }
  });

  // Аплоады
  document.getElementById('header-upload').addEventListener('change', e => {
    const f = e.target.files[0];
    if (f) {
      const r = new FileReader();
      r.onload = ev => {
        document.getElementById('header').style.backgroundImage = `url(${ev.target.result})`;
        localStorage.setItem('header', ev.target.result);
        headerPos = { x: 0, y: 0 };
        localStorage.setItem('headerPos', JSON.stringify(headerPos));
        document.getElementById('header').style.backgroundPosition = '0px 0px';
      };
      r.readAsDataURL(f);
    }
  });

  document.getElementById('avatar-upload').addEventListener('change', e => {
    const f = e.target.files[0];
    if (f) {
      const r = new FileReader();
      r.onload = ev => {
        document.getElementById('avatar').style.backgroundImage = `url(${ev.target.result})`;
        localStorage.setItem('avatar', ev.target.result);
      };
      r.readAsDataURL(f);
    }
  });

  document.querySelector('.header').onclick = () => document.getElementById('header-upload').click();
  document.getElementById('avatar').onclick = () => document.getElementById('avatar-upload').click();

  // Шестерёнка — только подсказка
  const btn = document.getElementById('editBtn');
  const tt = document.getElementById('editTooltip');
  btn.onmouseenter = () => tt.style.opacity = '1';
  btn.onmouseleave = () => tt.style.opacity = '0';

  // Фон страницы — bg3.jpg по умолчанию
  document.body.style.backgroundImage = `url('https://raw.githubusercontent.com/SolPhantomX/cryptobros/main/bg3.jpg')`;
</script>

</body>
</html>
