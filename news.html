<!-- Cryptobros News Feed -->
<div id="news-feed">
  <h2 style="text-align:center; color:#0047FF; margin:2rem 0;">Свежие крипто-новости</h2>
  <div id="news-loading" style="text-align:center; padding:2rem; opacity:0.7;">Загружаем новости...</div>
  <div id="news-list" style="display:grid; grid-template-columns:repeat(auto-fit, minmax(320px,1fr)); gap:1.5rem;"></div>
</div>

<script src="https://cdn.jsdelivr.net/npm/rss-parser@3.13.0/dist/rss-parser.min.js"></script>
<script>
  const parser = new RSSParser();
  const feeds = [
    'https://www.coindesk.com/arc/outboundfeeds/rss/',
    'https://cointelegraph.com/rss',
    'https://www.theblock.co/feed',
    'https://decrypt.co/feed',
    'https://cryptoslate.com/feed/'
  ];

  async function fetchNews() {
    const list = document.getElementById('news-list');
    const loading = document.getElementById('news-loading');
    loading.textContent = 'Собираем свежие новости...';

    let articles = [];
    for (const url of feeds) {
      try {
        const feed = await parser.parseURL(url);
        feed.items.slice(0, 6).forEach(item => {
          articles.push({
            title: item.title || 'Без заголовка',
            snippet: item.contentSnippet || item.description || '',
            link: item.link,
            date: item.pubDate ? new Date(item.pubDate).toLocaleString('ru-RU') : 'Неизвестно',
            source: feed.title || new URL(url).hostname.replace('www.', '')
          });
        });
      } catch (err) {
        console.log('RSS error:', url);
      }
    }

    articles.sort((a,b) => new Date(b.date) - new Date(a.date));

    list.innerHTML = articles.slice(0, 20).map(a => `
      <div style="background:rgba(10,14,39,0.8); border:1px solid rgba(0,71,255,0.3); border-radius:12px; padding:1.2rem; backdrop-filter:blur(8px);">
        <h3 style="margin:0 0 0.6rem; color:#00f0ff;">${a.title}</h3>
        <p style="margin:0 0 0.8rem; opacity:0.85; font-size:0.95rem;">${a.snippet.slice(0, 120)}${a.snippet.length > 120 ? '...' : ''}</p>
        <div style="font-size:0.85rem; opacity:0.6; margin-bottom:0.8rem;">${a.source} • ${a.date}</div>
        <a href="${a.link}" target="_blank" style="color:#0047FF; font-weight:600; text-decoration:none;">Читать на ${a.source} →</a>
      </div>
    `).join('');

    loading.style.display = 'none';
  }

  fetchNews();
  setInterval(fetchNews, 600000); // каждые 10 минут
</script>
