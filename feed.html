<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CryptoBros Feed</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Roboto+Mono:wght@400;500&display=swap" rel="stylesheet">
<link rel="stylesheet" href="feed.css">

<!-- VanillaTilt for swinging panels -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/vanilla-tilt/1.8.0/vanilla-tilt.min.js"></script>

<style>
/* Shimmer only for text + gear button */
.shimmer-text {
    background: linear-gradient(90deg, #FFD700, #00F0FF, #9D00FF, #ff4d4d, #00ff9d, #FFD700);
    background-size: 400% 400%;
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent !important;
    animation: shimmerCycle 5s linear infinite;
    font-weight: 700;
}

/* Gear button - ALWAYS SLOWLY SPINNING + gradient */
#feedBgBtn {
    width: 42px;  /* Ğ£Ğ¼ĞµĞ½ÑŒÑˆĞ¸Ğ» Ñ 48px Ğ´Ğ¾ 42px */
    height: 42px; /* Ğ£Ğ¼ĞµĞ½ÑŒÑˆĞ¸Ğ» Ñ 48px Ğ´Ğ¾ 42px */
    background: linear-gradient(135deg, #FFD700, #00F0FF, #9D00FF, #ff4d4d) !important;
    background-size: 400% 400% !important;
    animation: shimmerCycle 5s linear infinite, slowSpin 8s linear infinite !important;
    color: #0a0a0f !important;
    border: 2px solid transparent !important;
    border-radius: 50%;
    cursor: pointer;
    font-size: 1.3rem;
    display: flex;
    align-items: center;
    justify-content: center;
    position: fixed;
    bottom: 30px;
    right: 30px;
    z-index: 1000;
    box-shadow: 0 0 15px rgba(255,215,0,0.3);
    transition: transform 0.3s ease;
}

#feedBgBtn:hover {
    transform: scale(1.1);
}

/* Slower spin for gear */
@keyframes slowSpin {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
}

@keyframes shimmerCycle {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
}

/* ===== SWINGING PANELS ===== */
.sidebar-user,
.sidebar-menu a,
.create-post,
.pinned-auctions,
.trends-card,
#feedPosts > * {
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    will-change: transform;
}

/* Back button and theme toggle also swing */
.back-btn,
.theme-toggle {
    transition: transform 0.3s ease;
    display: inline-block;
}

/* Color picker from gear button */
.text-color-section .color-btn {
    transition: all 0.3s ease;
    cursor: pointer;
}

.text-color-section .color-btn:hover {
    transform: scale(1.15);
    box-shadow: 0 0 15px currentColor;
}

/* @cryptobros username - can be colored */
.sidebar-user h3 {
    transition: color 0.3s ease;
}
</style>
</head>
<body>
<div class="layout">
<aside>
<a href="profile.html" class="sidebar-user">
<div class="sidebar-user-content">
<div class="avatar avatar-base" id="sidebarAvatar">C</div>
<div class="user-info">
<h3 id="sidebarUsername">@cryptobros</h3>
<p>CHAIRMAN OF THE TRIBUNAL</p>
</div>
</div>
</a>
<div class="sidebar-menu">
<a href="feed.html" class="menu-item active">ğŸ“° News Feed</a>
<a href="messages.html" class="menu-item">ğŸ’¬ Messages</a>
<a href="groups.html" class="menu-item">ğŸ‘¥ My Groups</a>
<a href="profile.html" class="menu-item">âš™ï¸ Settings</a>
<a href="tribunal.html" class="menu-item">ğŸ’¡ Tribunal</a>
<a href="help.html" class="menu-item">ğŸ†˜ Help Desk</a>
<a href="payment.html" class="menu-item">ğŸ’° AUS Token</a>
</div>
</aside>
<main>
<div class="top-bar">
<a href="profile.html" class="back-btn">â† Back to Profile</a>
<div class="theme-toggle" id="themeToggle">ğŸŒ™</div>
</div>
<div class="search-container" id="searchContainer">
<div class="search-wrapper">
<span class="search-icon">ğŸ”</span>
<input type="text" id="globalSearchInput" placeholder="Search posts, #hashtags, $tokens..." autocomplete="off">
<button class="search-clear" id="searchClearBtn" style="display:none;">âœ•</button>
</div>
<div class="search-results" id="searchResultsBox" style="display:none;"></div>
</div>
<div class="create-post">
<div style="display: flex; gap: 1rem; align-items: flex-start;">
<div class="create-avatar avatar-base" id="createAvatar">C</div>
<div style="flex: 1;">
<textarea class="create-input" id="postInput" placeholder="What's on your mind? (max 2000 chars)" maxlength="2000" rows="4"></textarea>
<div class="create-actions">
<span id="charCount">0 / 2000</span>
<button class="btn-post" id="btnPost" onclick="createPost()">ğŸ“ Post</button>
</div>
</div>
</div>
</div>
<div class="pinned-auctions">
<h2>Auction Winners ğŸ†</h2>
<div id="pinnedPostsContainer">
    <p class="shimmer-text">No auction winners yet</p>
    <p class="shimmer-text">Be the first degen to share alpha!</p>
    <p class="shimmer-text">Mock mode</p>
</div>
</div>
<div id="feedPosts">
    <h3 class="shimmer-text">No posts yet</h3>
    <p class="shimmer-text">Be the first degen to share alpha!</p>
    <p class="shimmer-text">Mock mode</p>
</div>
</main>
<div class="right-sidebar">
<div class="trends-card">
<div class="trends-title">ğŸ”¥ Hot Topics</div>
<div class="trend-item"><div class="trend-name">#WIF Pump</div><div class="trend-count" id="trend1">2.1k <span class="trend-indicator trend-neutral">â—</span></div></div>
<div class="trend-item"><div class="trend-name">#SOL Buy</div><div class="trend-count" id="trend2">1.8k <span class="trend-indicator trend-neutral">â—</span></div></div>
<div class="trend-item"><div class="trend-name">#TribunalVote</div><div class="trend-count" id="trend3">942 <span class="trend-indicator trend-neutral">â—</span></div></div>
</div>
<div class="trends-card">
<div class="trends-title">Your Wallet</div>
<div style="font-weight: 600; color: var(--accent-gold); margin: 0.8rem 0;">0.00 SOL</div>
<div style="color: var(--text-secondary); font-size: 0.95rem;">AUS: pending launch</div>
<button style="width: 100%; margin-top: 1rem; padding: 0.8rem; background: var(--accent-gold); color: #0a0a0f; border: none; border-radius: 12px; font-weight: 600; cursor: pointer;" onclick="window.location.href='wallet-connect.html'">Connect Phantom</button>
</div>
</div>
</div>

<!-- Gear Button - Smaller -->
<button id="feedBgBtn" class="feed-bg-btn" title="Change Feed Background">âš™ï¸</button>

<!-- Modal -->
<div id="feedBgModal" class="feed-bg-modal" style="display:none;">
<div class="feed-bg-modal-content">
<h3>Customize Feed</h3>
<div class="text-color-section">
<h4>Text Color</h4>
<div class="color-buttons">
<button class="color-btn" style="background:#ffd700;" onclick="setTextColor('#ffd700')"></button>
<button class="color-btn" style="background:#00f0ff;" onclick="setTextColor('#00f0ff')"></button>
<button class="color-btn" style="background:#9d00ff;" onclick="setTextColor('#9d00ff')"></button>
<button class="color-btn" style="background:#ff4d4d;" onclick="setTextColor('#ff4d4d')"></button>
<button class="color-btn" style="background:#ffffff;border:2px solid #000;" onclick="setTextColor('#ffffff')"></button>
</div>
</div>
<div class="bg-presets-grid" id="bgPresetsGrid"></div>
<div class="bg-upload-section">
<label for="feedBgUpload" class="bg-upload-label">Upload Custom Background</label>
<input type="file" id="feedBgUpload" accept="image/*" class="bg-upload-input">
</div>
<div class="bg-actions">
<button onclick="resetCustomColors()" class="btn-reset">Reset All Colors</button>
<button onclick="closeFeedBgModal()" class="btn-close-modal">Close</button>
</div>
</div>
</div>

<script>
// ===== VANILLA TILT FOR SWINGING PANELS =====
function initTilt() {
    if (typeof VanillaTilt === 'undefined') {
        setTimeout(initTilt, 100);
        return;
    }
    
    // All panels except search
    const swingElements = document.querySelectorAll(
        '.sidebar-user, .sidebar-menu a, .create-post, .pinned-auctions, ' +
        '.trends-card, #feedPosts > *, .back-btn, .theme-toggle'
    );
    
    VanillaTilt.init(swingElements, {
        max: 6,           // Gentle swing
        speed: 400,
        glare: true,
        'max-glare': 0.2,
        scale: 1.02,
        easing: "cubic-bezier(.03,.98,.52,.99)"
    });
}

// ===== COLOR CUSTOMIZATION =====
function setTextColor(color) {
    // Change @cryptobros color
    const username = document.getElementById('sidebarUsername');
    if (username) username.style.color = color;
    
    // Change back button color
    const backBtn = document.querySelector('.back-btn');
    if (backBtn) backBtn.style.color = color;
    
    // Save to localStorage
    localStorage.setItem('feedTextColor', color);
    
    // Close modal after selection
    closeFeedBgModal();
}

// ===== RESET COLORS =====
function resetCustomColors() {
    const username = document.getElementById('sidebarUsername');
    if (username) username.style.color = '';
    
    const backBtn = document.querySelector('.back-btn');
    if (backBtn) backBtn.style.color = '';
    
    localStorage.removeItem('feedTextColor');
}

// ===== LOAD SAVED COLOR =====
function loadSavedColor() {
    const savedColor = localStorage.getItem('feedTextColor');
    if (savedColor) {
        const username = document.getElementById('sidebarUsername');
        if (username) username.style.color = savedColor;
        
        const backBtn = document.querySelector('.back-btn');
        if (backBtn) backBtn.style.color = savedColor;
    }
}

// ===== MODAL FUNCTIONS =====
function closeFeedBgModal() {
    document.getElementById('feedBgModal').style.display = 'none';
}

// Initialize on load
window.addEventListener('DOMContentLoaded', () => {
    initTilt();
    loadSavedColor();
    
    // Gear button click toggles modal
    document.getElementById('feedBgBtn').addEventListener('click', (e) => {
        e.stopPropagation();
        const modal = document.getElementById('feedBgModal');
        if (modal.style.display === 'flex' || modal.style.display === 'block') {
            modal.style.display = 'none';
        } else {
            modal.style.display = 'flex';
        }
    });
    
    // Close modal when clicking outside
    window.addEventListener('click', (e) => {
        const modal = document.getElementById('feedBgModal');
        const btn = document.getElementById('feedBgBtn');
        if (e.target !== btn && !btn.contains(e.target) && 
            e.target !== modal && !modal.contains(e.target)) {
            modal.style.display = 'none';
        }
    });
});
</script>

<script src="feed-config.js"></script>
<script src="feed-utils.js"></script>
<script src="feed-sentinel.js"></script>
<script src="feed-background.js"></script>
<script src="feed-trends.js"></script>
<script src="feed-search.js"></script>
<script src="feed-ui.js"></script>
<script src="feed-main.js"></script>

</body>
</html>
